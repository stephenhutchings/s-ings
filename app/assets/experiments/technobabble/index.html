<html>
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
  <style type="text/css">
  body {
    background: #000;
    font-size: 0;
    margin: 0;
    padding: 0;
    text-align: center;
  }
  img {
    width: 180px;
    height: 180px;
    display: inline-block;
  }
  </style>
  <body>
    <script type="text/javascript">!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.StackBlur=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(a,b,c,d){if("string"==typeof a)var a=document.getElementById(a);else if(!a instanceof HTMLImageElement)return;var e=a.naturalWidth,g=a.naturalHeight;if("string"==typeof b)var b=document.getElementById(b);else if(!b instanceof HTMLCanvasElement)return;b.style.width=e+"px",b.style.height=g+"px",b.width=e,b.height=g;var i=b.getContext("2d");i.clearRect(0,0,e,g),i.drawImage(a,0,0),isNaN(c)||1>c||(d?f(b,0,0,e,g,c):h(b,0,0,e,g,c))}function e(a,b,c,d,e){if("string"==typeof a)var a=document.getElementById(a);else if(!a instanceof HTMLCanvasElement)return;var f,g=a.getContext("2d");try{try{f=g.getImageData(b,c,d,e)}catch(h){throw new Error("unable to access local image data: "+h)}}catch(h){throw new Error("unable to access image data: "+h)}return f}function f(a,b,c,d,f,h){if(!(isNaN(h)||1>h)){h|=0;var i=e(a,b,c,d,f);i=g(i,b,c,d,f,h),a.getContext("2d").putImageData(i,b,c)}}function g(a,b,c,d,e,f){var g,h,i,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H=a.data,I=f+f+1,J=d-1,K=e-1,L=f+1,M=L*(L+1)/2,N=new j,O=N;for(i=1;I>i;i++)if(O=O.next=new j,i==L)var P=O;O.next=N;var Q=null,R=null;p=o=0;var S=k[f],T=l[f];for(h=0;e>h;h++){for(y=z=A=B=q=r=s=t=0,u=L*(C=H[o]),v=L*(D=H[o+1]),w=L*(E=H[o+2]),x=L*(F=H[o+3]),q+=M*C,r+=M*D,s+=M*E,t+=M*F,O=N,i=0;L>i;i++)O.r=C,O.g=D,O.b=E,O.a=F,O=O.next;for(i=1;L>i;i++)m=o+((i>J?J:i)<<2),q+=(O.r=C=H[m])*(G=L-i),r+=(O.g=D=H[m+1])*G,s+=(O.b=E=H[m+2])*G,t+=(O.a=F=H[m+3])*G,y+=C,z+=D,A+=E,B+=F,O=O.next;for(Q=N,R=P,g=0;d>g;g++)H[o+3]=F=t*S>>T,0!=F?(F=255/F,H[o]=(q*S>>T)*F,H[o+1]=(r*S>>T)*F,H[o+2]=(s*S>>T)*F):H[o]=H[o+1]=H[o+2]=0,q-=u,r-=v,s-=w,t-=x,u-=Q.r,v-=Q.g,w-=Q.b,x-=Q.a,m=p+((m=g+f+1)<J?m:J)<<2,y+=Q.r=H[m],z+=Q.g=H[m+1],A+=Q.b=H[m+2],B+=Q.a=H[m+3],q+=y,r+=z,s+=A,t+=B,Q=Q.next,u+=C=R.r,v+=D=R.g,w+=E=R.b,x+=F=R.a,y-=C,z-=D,A-=E,B-=F,R=R.next,o+=4;p+=d}for(g=0;d>g;g++){for(z=A=B=y=r=s=t=q=0,o=g<<2,u=L*(C=H[o]),v=L*(D=H[o+1]),w=L*(E=H[o+2]),x=L*(F=H[o+3]),q+=M*C,r+=M*D,s+=M*E,t+=M*F,O=N,i=0;L>i;i++)O.r=C,O.g=D,O.b=E,O.a=F,O=O.next;for(n=d,i=1;f>=i;i++)o=n+g<<2,q+=(O.r=C=H[o])*(G=L-i),r+=(O.g=D=H[o+1])*G,s+=(O.b=E=H[o+2])*G,t+=(O.a=F=H[o+3])*G,y+=C,z+=D,A+=E,B+=F,O=O.next,K>i&&(n+=d);for(o=g,Q=N,R=P,h=0;e>h;h++)m=o<<2,H[m+3]=F=t*S>>T,F>0?(F=255/F,H[m]=(q*S>>T)*F,H[m+1]=(r*S>>T)*F,H[m+2]=(s*S>>T)*F):H[m]=H[m+1]=H[m+2]=0,q-=u,r-=v,s-=w,t-=x,u-=Q.r,v-=Q.g,w-=Q.b,x-=Q.a,m=g+((m=h+L)<K?m:K)*d<<2,q+=y+=Q.r=H[m],r+=z+=Q.g=H[m+1],s+=A+=Q.b=H[m+2],t+=B+=Q.a=H[m+3],Q=Q.next,u+=C=R.r,v+=D=R.g,w+=E=R.b,x+=F=R.a,y-=C,z-=D,A-=E,B-=F,R=R.next,o+=d}return a}function h(a,b,c,d,f,g){if(!(isNaN(g)||1>g)){g|=0;var h=e(a,b,c,d,f);h=i(h,b,c,d,f,g),a.getContext("2d").putImageData(h,b,c)}}function i(a,b,c,d,e,f){var g,h,i,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D=a.data,E=f+f+1,F=d-1,G=e-1,H=f+1,I=H*(H+1)/2,J=new j,K=J;for(i=1;E>i;i++)if(K=K.next=new j,i==H)var L=K;K.next=J;var M=null,N=null;p=o=0;var O=k[f],P=l[f];for(h=0;e>h;h++){for(w=x=y=q=r=s=0,t=H*(z=D[o]),u=H*(A=D[o+1]),v=H*(B=D[o+2]),q+=I*z,r+=I*A,s+=I*B,K=J,i=0;H>i;i++)K.r=z,K.g=A,K.b=B,K=K.next;for(i=1;H>i;i++)m=o+((i>F?F:i)<<2),q+=(K.r=z=D[m])*(C=H-i),r+=(K.g=A=D[m+1])*C,s+=(K.b=B=D[m+2])*C,w+=z,x+=A,y+=B,K=K.next;for(M=J,N=L,g=0;d>g;g++)D[o]=q*O>>P,D[o+1]=r*O>>P,D[o+2]=s*O>>P,q-=t,r-=u,s-=v,t-=M.r,u-=M.g,v-=M.b,m=p+((m=g+f+1)<F?m:F)<<2,w+=M.r=D[m],x+=M.g=D[m+1],y+=M.b=D[m+2],q+=w,r+=x,s+=y,M=M.next,t+=z=N.r,u+=A=N.g,v+=B=N.b,w-=z,x-=A,y-=B,N=N.next,o+=4;p+=d}for(g=0;d>g;g++){for(x=y=w=r=s=q=0,o=g<<2,t=H*(z=D[o]),u=H*(A=D[o+1]),v=H*(B=D[o+2]),q+=I*z,r+=I*A,s+=I*B,K=J,i=0;H>i;i++)K.r=z,K.g=A,K.b=B,K=K.next;for(n=d,i=1;f>=i;i++)o=n+g<<2,q+=(K.r=z=D[o])*(C=H-i),r+=(K.g=A=D[o+1])*C,s+=(K.b=B=D[o+2])*C,w+=z,x+=A,y+=B,K=K.next,G>i&&(n+=d);for(o=g,M=J,N=L,h=0;e>h;h++)m=o<<2,D[m]=q*O>>P,D[m+1]=r*O>>P,D[m+2]=s*O>>P,q-=t,r-=u,s-=v,t-=M.r,u-=M.g,v-=M.b,m=g+((m=h+H)<G?m:G)*d<<2,q+=w+=M.r=D[m],r+=x+=M.g=D[m+1],s+=y+=M.b=D[m+2],M=M.next,t+=z=N.r,u+=A=N.g,v+=B=N.b,w-=z,x-=A,y-=B,N=N.next,o+=d}return a}function j(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var k=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],l=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];b.exports={image:d,canvasRGBA:f,canvasRGB:h,imageDataRGBA:g,imageDataRGB:i}},{}]},{},[1])(1)});</script>
    <script type="text/javascript">(function(q){var x=q.document,g=q.Math,m=function(a,c){for(var d in c)a[d]=c[d]},j=function(a,c){if(!a)throw Error(c||"");},l=function(a,c){j("canvas"===a.nodeName.toLowerCase(),"A canvas element is excepted.");var d={width:a.width,height:a.height,useWorker:"function"===typeof Worker,workerPath:"CanvasEffects.worker.js"};m(d,c);this.width=d.width;this.height=d.height;var b=x.createElement("canvas");b.width=this.width;b.height=this.height;this.ctx=a.getContext("2d");this.tmpCtx=b.getContext("2d");if(d.useWorker){var e=this;this._queue=[];this.worker=new Worker(d.workerPath);this.worker.onmessage=function(a){var c=e.createImageData(e.width,e.height);if("undefined"===typeof Uint8ClampedArray)for(var b=0;b<a.data.length;b++)c.data[b]=a.data[b];else c.data.set(a.data);for(b=0;b<e._queue.length;b++)c.data=e._queue[b](c.data);e._queue=[];e.ctx.clearRect(0,0,e.width,e.height);e.ctx.putImageData(c,0,0)};this.worker.postMessage({type:"init",w:this.width,h:this.height})}};m(l.prototype,{load:function(a,c){c="undefined"!==typeof c?c:!0;var d=new Image,b=this;d.onload=function(){c?(b.ctx.drawImage(this,0,0,this.width,this.height,0,0,b.width,b.height),b.tmpCtx.drawImage(this,0,0,this.width,this.height,0,0,b.width,b.height)):(b.ctx.drawImage(this,0,0,this.width,this.height),b.tmpCtx.drawImage(this,0,0,this.width,this.height))};d.crossOrigin=!0;d.src=a;return this},restore:function(){this.ctx.clearRect(0,0,this.width,this.height);this.ctx.drawImage(this.tmpCtx.canvas,0,0,this.width,this.height);return this},save:function(){this.tmpCtx.clearRect(0,0,this.width,this.height);this.tmpCtx.drawImage(this.ctx.canvas,0,0,this.width,this.height);return this},toDataURL:function(){return this.ctx.canvas.toDataURL()},process:function(a){for(var c=this.ctx.getImageData(0,0,this.width,this.height),d=0;d<this.width;d++)for(var b=0;b<this.height;b++){var e=4*(b*this.width+d),f=a(c.data[e],c.data[e+1],c.data[e+2],c.data[e+3],d,b);c.data[e]=f[0];c.data[e+1]=f[1];c.data[e+2]=f[2];c.data[e+3]=f[3]}this.ctx.clearRect(0,0,this.width,this.height);this.ctx.putImageData(c,0,0);return this},getContext:function(){return this.ctx},luminance:function(a,c,d){return 0.2126*a+0.7152*c+0.0722*d},createImageData:function(a,c){return this.tmpCtx.createImageData(a,c)},toHSL:function(a,c,d){a/=255;c/=255;d/=255;var b=g.max(a,c,d),e=g.min(a,c,d),f,h=(b+e)/2;if(b===e)f=e=0;else{var k=b-e,e=0.5<h?k/(2-b-e):k/(b+e);switch(b){case a:f=(c-d)/k+(c<d?6:0);break;case c:f=(d-a)/k+2;break;case d:f=(a-c)/k+4}}return{h:f/6,s:e,l:h}},toRGB:function(a,c,d){if(0==c)d=c=a=d;else{var b=function(a,c,b){0>b&&(b+=1);1<b&&(b-=1);return b<1/6?a+6*(c-a)*b:0.5>b?c:b<2/3?a+6*(c-a)*(2/3-b):a},e=0.5>d?d*(1+c):d+c-d*c,f=2*d-e;d=b(f,e,a+1/3);c=b(f,e,a);a=b(f,e,a-1/3)}return{r:255*d,g:255*c,b:255*a}},colorTempToRGB:function(a){a/=100;var c,d;66>=a?(c=255,d=g.min(g.max(99.4708025861*g.log(a)-161.1195681661,0),255)):(c=g.min(g.max(329.698727446*g.pow(a-60,-0.1332047592),0),255),d=g.min(g.max(288.1221695283*g.pow(a-60,-0.0755148492),0),255));a=66<=a?255:19>=a?0:g.min(g.max(138.5177312231*g.log(a-10)-305.0447927307,0),255);return{r:c,g:d,b:a}},equalizeHistogram:function(a,c){var d=a.length;c||(c=a);for(var b=new Float32Array(256),e=0,f=0;f<d;++f)++b[~~a[f]],++e;for(var g=b[0],f=1;256>f;++f)g=b[f]+=g;e=255/e;for(f=0;f<d;++f)c[f]=b[~~a[f]]*e;return c},_toWorker:function(a){if(this.worker)return m(a,{data:this.ctx.getImageData(0,0,this.width,this.height).data}),this.worker.postMessage(a),this;j(!1,"No web worker support!")},queue:function(a){if(this.worker)this._queue.push(a);else{var c=this.ctx.getImageData(0,0,this.width,this.height);c.data=a(c.data);this.ctx.putImageData(c,0,0)}return this}});m(l.prototype,{greyscale:function(a){a=void 0===a?1:g.min(g.max(a,0),1);var c=this;return this.process(function(d,b,e,f){var g=c.luminance(d,b,e);return[g*a+d*(1-a),g*a+b*(1-a),g*a+e*(1-a),f]})},threshold:function(a){a=a||127;var c=this;return this.process(function(d,b,e,f){d=c.luminance(d,b,e)>a?255:0;return[d,d,d,f]})},invert:function(a){a=void 0===a?1:g.min(g.max(a,0),1);return this.process(function(c,d,b,e){return[(255-c)*a+c*(1-a),(255-d)*a+d*(1-a),(255-b)*a+b*(1-a),e]})},sepia:function(a){a=void 0===a?1:g.min(g.max(a,0),1);return this.process(function(c,d,b,e){return[(0.393*c+0.769*d+0.189*b)*a+c*(1-a),(0.349*c+0.686*d+0.168*b)*a+d*(1-a),(0.272*c+0.534*d+0.131*b)*a+b*(1-a),e]})},hdr:function(){var a=function(a){0<a&&127>=a?a*=g.sin(g.PI*(90-a/4)/180):127<a&&(a*=g.sin(g.PI*(90-(255-a)/4)/180));return a};return this.process(function(c,d,b,e){return[a(c),a(d),a(b),e]})}});m(l.prototype,{noise:function(a,c){j(0<=a,"Noise amount must be a positive number.");c=c||!1;return this.process(function(d,b,e,f){var h=-a/2+2*g.random()*a;return[d+h,b+h,e+h,c?f+h:f]})},glow:function(a){var c=this;this.blur(a);return this.queue(function(a){for(var b=c.ctx.getImageData(0,0,c.width,c.height),e=0;e<a.length;e+=4)a[e]=255-(255-a[e])*(255-b.data[e])/255,a[e+1]=255-(255-a[e+1])*(255-b.data[e+1])/255,a[e+2]=255-(255-a[e+2])*(255-b.data[e+2])/255,a[e+3]=255-(255-a[e+3])*(255-b.data[e+3])/255;return a})},colorMatrix:function(a){return this.process(function(c,d,b,e){return[c*a[0]+d*a[1]+b*a[2]+e*a[3]+255*a[20],c*a[5]+d*a[6]+b*a[7]+e*a[8]+255*a[21],c*a[10]+d*a[11]+b*a[12]+e*a[13]+255*a[22],c*a[15]+d*a[16]+b*a[17]+e*a[18]+255*a[23]]})},equalize:function(){var a=this,c=new Uint8ClampedArray(this.width*this.height),d=0;this.process(function(b,e,f,g){c[d]=a.luminance(b,e,f);d++;return[b,e,f,g]});this.equalizeHistogram(c);d=0;return this.process(function(b,e,f,g){b=a.toHSL(b,e,f);b.l=c[d]/255;d++;b=a.toRGB(b.h,b.s,b.l);return[b.r,b.g,b.b,g]})},tv:function(){this.process(function(a,c,d,b,e,f){e=80*g.sin(f);return[a-e,c-e,d-e,b]});return this.noise(50)}});m(l.prototype,{hue:function(a,c){j(void 0!==a,"Hue must be specified.");var d=this;c=c||!1;return this.process(function(b,e,f,g){b=d.toHSL(b,e,f);b.h=c?a/360:b.h+a/360;b=d.toRGB(b.h,b.s,b.l);return[b.r,b.g,b.b,g]})},saturation:function(a,c){j(void 0!==a,"Saturation must be specified.");var d=this;c=c||!1;return this.process(function(b,e,f,h){b=d.toHSL(b,e,f);b.s=c?g.min(g.max(a,0),1):g.min(g.max(b.s+a,0),1);b=d.toRGB(b.h,b.s,b.l);return[b.r,b.g,b.b,h]})},brightness:function(a){j(void 0!==a,"Brightness must be set");return this.process(function(c,d,b,e){return[c+a,d+a,b+a,e]})},contrast:function(a){j(void 0!==a,"Contrast level must be set.");a=g.pow((a+100)/100,2);return this.process(function(c,d,b,e){return[255*((c/255-0.5)*a+0.5),255*((d/255-0.5)*a+0.5),255*((b/255-0.5)*a+0.5),e]})},gamma:function(a){j(void 0!==a,"Gamma level must be set.");return this.process(function(c,d,b,e){return[c*a,d*a,b*a,e]})},gammaRGB:function(a,c,d){j(void 0!==a&&void 0!==c&&void 0!==d,"Gamma level must be set.");return this.process(function(b,e,f,g){return[b*a,e*c,f*d,g]})},vibrance:function(a){j(void 0!==a,"Vibrance level must be set.");a*=-1;return this.process(function(c,d,b,e){var f=g.max(c,d,b),h=2*g.abs(f-(c+d+b)/3)/255*a/100;c!==f&&(c+=(f-c)*h);d!==f&&(d+=(f-d)*h);b!==f&&(b+=(f-b)*h);return[c,d,b,e]})},whiteBalance:function(a){var c=this.colorTempToRGB(a);return this.process(function(a,b,e,f){return[a*(255/c.r),b*(255/c.g),e*(255/c.b),f]})}});m(l.prototype,{convolute:function(a,c,d){j(void 0!==a,"Convolution matrix must be set.");j(void 0!==c,"Offset must be set.");d=d||!0;if(this.worker)this._toWorker({type:"convolute",matrix:a,offset:c,opaque:d});else{var b=this.ctx.getImageData(0,0,this.width,this.height),e=g.round(g.sqrt(a.length)),f=g.floor(e/2),h=b.data,k=b.width,b=b.height,m=this.createImageData(k,b),l=m.data;d=d?1:0;for(var r=0;r<b;r++)for(var s=0;s<k;s++){for(var q=r,x=s,t=4*(r*k+s),y=0,z=0,A=0,u=0,v=0;v<e;v++)for(var w=0;w<e;w++){var n=q+v-f,p=x+w-f;0<=n&&(n<b&&0<=p&&p<k)&&(n=4*(n*k+p),p=a[v*e+w],y+=h[n]*p,z+=h[n+1]*p,A+=h[n+2]*p,u+=h[n+3]*p)}l[t]=c+y;l[t+1]=c+z;l[t+2]=c+A;l[t+3]=u+d*(255-u)}this.ctx.clearRect(0,0,this.width,this.height);this.ctx.putImageData(m,0,0)}return this},blur:function(a){j(void 0!==a,"Blur radius must be set.");a*=a;var c=1/a,d=[];if(4>a)return this;for(;a--;)d.push(c);return this.convolute(d,0,!1)},sharpen:function(){return this.convolute([0,-1,0,-1,5,-1,0,-1,0],0,!1)},emboss:function(){return this.convolute([2,0,0,0,-1,0,0,0,-1],127,!1)},findEdges:function(){return this.convolute([-1,0,1,-2,0,2,-1,0,1],0,!1)}});q.CanvasEffects=l})(window);</script>
    <script type="text/javascript">
      function resample_hermite(canvas, W, H, W2, H2){
        var time1 = Date.now();
        W2 = Math.round(W2);
        H2 = Math.round(H2);
        var img = canvas.getContext("2d").getImageData(0, 0, W, H);
        var img2 = canvas.getContext("2d").getImageData(0, 0, W2, H2);
        var data = img.data;
        var data2 = img2.data;
        var ratio_w = W / W2;
        var ratio_h = H / H2;
        var ratio_w_half = Math.ceil(ratio_w/2);
        var ratio_h_half = Math.ceil(ratio_h/2);

        for(var j = 0; j < H2; j++){
            for(var i = 0; i < W2; i++){
                var x2 = (i + j*W2) * 4;
                var weight = 0;
                var weights = 0;
                var weights_alpha = 0;
                var gx_r = gx_g = gx_b = gx_a = 0;
                var center_y = (j + 0.5) * ratio_h;
                for(var yy = Math.floor(j * ratio_h); yy < (j + 1) * ratio_h; yy++){
                    var dy = Math.abs(center_y - (yy + 0.5)) / ratio_h_half;
                    var center_x = (i + 0.5) * ratio_w;
                    var w0 = dy*dy //pre-calc part of w
                    for(var xx = Math.floor(i * ratio_w); xx < (i + 1) * ratio_w; xx++){
                        var dx = Math.abs(center_x - (xx + 0.5)) / ratio_w_half;
                        var w = Math.sqrt(w0 + dx*dx);
                        if(w >= -1 && w <= 1){
                            //hermite filter
                            weight = 2 * w*w*w - 3*w*w + 1;
                            if(weight > 0){
                                dx = 4*(xx + yy*W);
                                //alpha
                                gx_a += weight * data[dx + 3];
                                weights_alpha += weight;
                                //colors
                                if(data[dx + 3] < 255)
                                    weight = weight * data[dx + 3] / 250;
                                gx_r += weight * data[dx];
                                gx_g += weight * data[dx + 1];
                                gx_b += weight * data[dx + 2];
                                weights += weight;
                                }
                            }
                        }
                    }
                data2[x2]     = gx_r / weights;
                data2[x2 + 1] = gx_g / weights;
                data2[x2 + 2] = gx_b / weights;
                data2[x2 + 3] = gx_a / weights_alpha;
                }
            }
        canvas.getContext("2d").clearRect(0, 0, Math.max(W, W2), Math.max(H, H2));
        canvas.getContext("2d").putImageData(img2, 0, 0);
    }
    </script>
    <script>
      var cvs = document.createElement('canvas');
      var ctx = cvs.getContext('2d');
      var cvs2 = document.createElement('canvas');
      var ctx2 = cvs2.getContext("2d")

      var large = cvs.width = cvs.height = 720;
      var small = cvs2.width = cvs2.height = 360;

      function drawShape(ctx, r, dir) {
        var x = large / 2 + (-.5 + Math.random()) * 8;
        var y = large / 2 + (-.5 + Math.random()) * 8;

        var points = Math.floor(Math.random() * 12) + 3;
        var r1 = r * (1 + Math.random() * 0.2);
        var r2 = r * (1 - Math.random() * 0.3);

        var i, angle, r;
        dir = dir || 1;

        if (r2 !== r1) {
          points = 2 * points;
        }

        var variance = Math.min(Math.abs(r2/r1), Math.abs(r1/r2));
        if (variance < 0.2) {
          r1 = r2;
          ctx.arc(x, y, Math.abs(r1), 0, Math.PI * 2, dir < 0);

        } else {
          for (i = 0; i <= points; i++) {
            angle  = i * 2 * Math.PI / points * dir - Math.PI / 2;
            r = i % 2 === 0 ? r1 : r2;

            ctx[i === 0 ? "moveTo" : "lineTo"](
              x + r * Math.cos(angle), y + r * Math.sin(angle)
            );
          }
        }
      }

      function draw(count){
        ctx.globalCompositeOperation = "source-over";
        ctx.globalAlpha = 1;
        ctx.fillStyle = "#000";
        ctx.beginPath()
        ctx.rect(0, 0, large, large)
        ctx.fill()

        ctx.fillStyle = "#fff";
        ctx.beginPath();

        var shapes = 8 + Math.random() * 8;

        function random (arr) {
          return arr[Math.floor(Math.random() * arr.length)];
        }

        for (i = 0; i < shapes; i++) {
          drawShape(ctx, (large * 0.333) * ((i + 1) / shapes), i % 2 ? 1 : -1);
        }

        ctx.fill();

        var fx = new CanvasEffects(cvs, {useWorker: false});

        function smooth(r) {
          StackBlur.canvasRGBA(cvs, 0, 0, large, large, r);
          fx.threshold();
        }

        smooth(12 + 40 * Math.random())
        smooth(12)
        StackBlur.canvasRGBA(cvs, 0, 0, large, large, 2);

        resample_hermite(cvs, large, large, small, small);
        data = ctx.getImageData(0, 0, small, small)
        ctx2.putImageData(data, 0, 0);

        var image = new Image()
        image.onload = function() {
          document.body.appendChild(image);

          if (count > 0) {
            window.setTimeout(function(){
              draw(count - 1)
            }, 1)
          }
        }

        image.src = cvs2.toDataURL();
      }

      // document.addEventListener("click", draw)
      // document.addEventListener("keydown", draw)

      draw(500);
    </script>
  </body>
</html>
